<html>

<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.3/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.3/addons/p5.sound.js"></script>
    <script>
        //coordinates of small balls
        var x = [];
        var y = [];

        //size and speed of small balls
        var radius = [];
        var xspd = [];
        var yspd = [];

        var cx = 100;
        var cy = 100;

        var img; //background image
        var mus; //background music

        function preload() {
            img = loadImage("hk.jpg");
            mus = loadSound("172686__puniho__old-tape-cassette-recording-of-classical-guitar.wav");
        }

        function setup() {
            createCanvas(650, 625);
            background(90, 90, 90);
            textAlign(CENTER);
            for (var i = 0; i < 700; i++) {
                radius[i] = random(5, 2);
                x[i] = random(55, 555);
                y[i] = random(55, 480);
                xspd[i] = random(1, 2);
                yspd[i] = random(1, 2);
            }
            mus.setVolume(0.3); //music volume
            mus.loop(); //music
        }

        function draw() {
            tv();
            tvnoise(); //small moving balls
            follow(); //text that follows the mouse
        }

        function tv() {
            //screen
            noStroke();
            fill(120, 120, 120);
            rect(35, 35, 575, 500);
            stroke(30, 30, 30);
            strokeWeight(10);
            fill(119, 136, 153);
            rect(45, 45, 555, 480);
            image(img, 45, 45);
            textSize(30);
            strokeWeight(10);
            text("HONG KONG", width / 2, height / 2 - 50);
            fill(119, 136, 153, 120);
            rect(45, 45, 555, 480);

            //button area
            stroke(108, 108, 108);
            strokeWeight(3);
            noFill();
            rect(180, 560, 280, 70);

            //input
            noStroke();
            fill(40, 40, 40);
            ellipse(240, 585, 23, 23);
            ellipse(200, 585, 23, 23);
            rect(200, 573.5, 40, 23);
            stroke(255, 215, 0);
            fill(0);
            ellipse(200, 585, 10, 10);
            stroke(255);
            ellipse(220, 585, 10, 10);
            stroke(178, 34, 34);
            ellipse(240, 585, 10, 10);

            //button
            noStroke();
            fill(128, 0, 0);
            rect(410, 590, 8, 3);
            stroke(70, 70, 70);
            strokeWeight(2);
            fill(100, 100, 100);
            rect(425, 570, 25, 25);

            //left speaker
            for (var r = 0; r < 11; r++) {
                for (var c = 0; c < 4; c++) {
                    noStroke();
                    fill(50, 50, 50);
                    ellipse(45 + r * 10, 595 - c * 10, 5, 5);
                }
            }
            //right speaker
            for (var r = 0; r < 11; r++) {
                for (var c = 0; c < 4; c++) {
                    noStroke();
                    fill(50, 50, 50);
                    ellipse(495 + r * 10, 595 - c * 10, 5, 5);
                }
            }
        }

        //small moving balls
        function tvnoise() {
            for (var i = 0; i < 700; i++) {
                fill(random(120, 230), random(10, 150));
                ellipse(x[i], y[i], radius[i] * 2, radius[i] * 2);
                // update the position based on speed
                x[i] = x[i] + xspd[i];
                y[i] = y[i] + yspd[i];
                // check collision with left/right wall
                if ((xspd[i] > 0 && x[i] >= 590 - radius[i]) || (xspd[i] < 0 && x[i] <= 65)) {
                    xspd[i] = xspd[i] * -1;
                }
                // check collision with top/bottom wall
                if ((yspd[i] > 0 && y[i] >= 510 - radius[i]) || (yspd[i] < 0 && y[i] <= 65)) {
                    yspd[i] = yspd[i] * -1;
                }
            }
        }

        //text that follows the mouse
        function follow() {
            if (mouseX > 65 && mouseX < 520 && mouseY > 65 && mouseY < 510) {
                fill(30);
                textSize(18);
                stroke(20);
                text("OUR HOME", cx, cy);
                cx = lerp(cx, mouseX, .1);
                cy = lerp(cy, mouseY, .1);
            }
        }
    </script>
</head>

</html>
